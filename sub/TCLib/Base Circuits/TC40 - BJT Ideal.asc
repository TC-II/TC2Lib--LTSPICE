Version 4
SHEET 1 3748 2268
WIRE 320 -384 320 -432
WIRE 2624 -304 2624 -352
WIRE 2800 -304 2624 -304
WIRE 32 -288 -256 -288
WIRE 320 -288 320 -320
WIRE 320 -288 32 -288
WIRE 416 -288 320 -288
WIRE 2624 -240 2624 -304
WIRE 320 -192 320 -288
WIRE 2624 -128 2624 -160
WIRE 2624 -128 2368 -128
WIRE 2624 -96 2624 -128
WIRE 320 -48 320 -112
WIRE 416 -48 320 -48
WIRE -256 -32 -256 -288
WIRE 32 -32 32 -288
WIRE 320 0 320 -48
WIRE -160 128 -176 128
WIRE -624 144 -768 144
WIRE -256 144 -256 32
WIRE -256 144 -560 144
WIRE -176 144 -176 128
WIRE -176 144 -256 144
WIRE 32 144 32 32
WIRE 320 144 320 64
WIRE 320 144 32 144
WIRE 416 144 320 144
WIRE 2624 160 2624 -16
WIRE 320 208 320 144
WIRE -1488 240 -1488 112
WIRE -256 304 -256 144
WIRE 32 304 32 144
WIRE 320 320 320 272
WIRE 416 320 320 320
WIRE 320 336 320 320
WIRE -1488 464 -1488 320
WIRE -256 512 -256 368
WIRE 32 512 32 368
WIRE 32 512 -256 512
WIRE 320 512 320 416
WIRE 320 512 32 512
WIRE 416 512 320 512
WIRE 320 624 320 512
WIRE 320 736 320 688
WIRE 2144 784 2144 752
WIRE 2144 880 2144 864
FLAG -768 144 B
FLAG 2144 752 E
FLAG 320 -432 C
FLAG 416 -288 Vcint
FLAG 416 144 Vx
FLAG 416 512 Veint
FLAG -176 128 Vbint
FLAG 416 -48 Vcr
FLAG 416 320 Ver
FLAG 2144 880 0
FLAG 320 736 E
FLAG 2624 160 0
FLAG 2624 -352 C
FLAG 2368 -128 Vcc
FLAG -1488 464 0
FLAG -1488 112 B
DATAFLAG -464 144 ""
DATAFLAG 496 608 "I(V_ie)"
DATAFLAG 496 -416 "I(V_ic)"
DATAFLAG -704 144 "I(V_ib)"
DATAFLAG 144 512 ""
DATAFLAG 688 160 "V(vcent)"
DATAFLAG 672 -288 "V(vcint)"
DATAFLAG 688 512 "V(veint)"
DATAFLAG 2752 -304 ""
SYMBOL diode -272 304 R0
SYMATTR InstName D5
SYMATTR Value Dideal_Vbe
SYMBOL diode -272 32 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value Dideal_Vbe
SYMBOL Misc\\cell 320 624 R0
WINDOW 0 32 32 VTop 2
WINDOW 3 -32 32 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_Ie
SYMATTR Value 0
SYMBOL Misc\\cell 320 -384 R0
WINDOW 0 32 32 VTop 2
WINDOW 3 -32 32 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_Ic
SYMATTR Value 0
SYMBOL res 304 -208 R0
SYMATTR InstName Rf1
SYMATTR Value R = limit(1u,100Meg, abs(   (     (V(Vcint,Vcr)^2+1m)/V(Vcint,Vcr)        ) / ( I(V_Ib)*hfe) )   )
SYMBOL Misc\\cell -624 144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 -32 32 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_Ib
SYMATTR Value 0
SYMBOL res 304 432 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rr1
SYMATTR Value R = limit(1u,100Meg, abs(   (  ( V(Veint,Ver)^2+1m ) / V(Veint,Ver)  )  / ( I(V_Ib)*hfe/20) ) )
SYMBOL diode 304 0 R0
SYMATTR InstName D7
SYMATTR Value Dideal_Vce
SYMBOL diode 16 32 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value Dideal
SYMBOL diode 304 272 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value Dideal_Vce
SYMBOL diode 16 304 R0
SYMATTR InstName D1
SYMATTR Value Dideal
SYMBOL voltage 2624 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL res 2640 -144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL current -1488 320 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 1m
SYMBOL res 2128 768 R0
SYMATTR InstName R2
SYMATTR Value 1p
TEXT 1464 -472 Left 2 !.model Dideal_Vbe D(Ron=1u Roff=10Meg Vfwd=Vbe)
TEXT 1520 -504 Left 2 !.model Dideal D(Ron=1u Roff=10Meg Vfwd=0)
TEXT 1464 -392 Left 2 !.param hfe 10
TEXT -152 984 Left 2 ;Javier Petrucci and Agustin Gullino\n2023
TEXT 1464 -440 Left 2 !.model Dideal_Vce D(Ron=1u Roff=10Meg Vfwd=Vce_sat)
TEXT 1464 -352 Left 2 !.param Vbe 0.7
TEXT 1464 -304 Left 2 !.param Vce_sat 0.3
TEXT 2184 -56 Left 2 !.op
TEXT 2904 -104 Left 2 ;.dc V1 0 1 0.1m I1 1m 5m 1m
TEXT 2912 8 Left 2 ;.dc I1 0 1m 0.1m
TEXT 2920 -248 Left 2 !.op
RECTANGLE Normal 1264 848 -864 -560 2
